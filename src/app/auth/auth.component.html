<div *ngIf="loading$ | async" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400"></div>
</div>

<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-black to-gray-800 px-4">


  <form *ngIf="!isSignupMode" #authForm="ngForm" (ngSubmit)="login()"
    class="w-full max-w-md text-white p-8 rounded-2xl shadow-2xl space-y-6">
    <h2 class="text-3xl font-extrabold text-center text-cyan-400">Log-In to Chime-In</h2>

    <div *ngIf="errorMessage$ | async as error" class="text-red-500 text-sm mt-2 text-center">
      {{ error }}
    </div>

    <div>
      <label for="email" class="block text-sm font-medium mb-1 text-gray-300">Email</label>
      <input type="email" id="email" name="email" required [(ngModel)]="email"
        class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 text-white" />
    </div>

    <div>
      <label for="password" class="block text-sm font-medium mb-1 text-gray-300">Password</label>
      <input type="password" id="password" name="password" required [(ngModel)]="password"
        class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 text-white" />
    </div>

    <div class="flex gap-4">
      <button type="submit" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white py-2 rounded-lg font-semibold">
        Login
      </button>
      <button type="button" (click)="switchToSignup()"
        class="w-full bg-gray-600 hover:bg-gray-700 text-white py-2 rounded-lg font-semibold">
        Switch To Sign Up
      </button>
    </div>
  </form>

  <form *ngIf="isSignupMode" #signupForm="ngForm" (ngSubmit)="signup()"
    class="w-full max-w-md text-white p-8 rounded-2xl shadow-2xl space-y-6">
    <h2 class="text-3xl font-extrabold text-center text-cyan-400">Sign Up</h2>
    <div *ngIf="errorMessage$ | async as error" class="text-red-500 text-sm mt-2 text-center">
      {{ error }}
    </div>

    <div>
      <label for="signupEmail" class="block text-sm font-medium mb-1 text-gray-300">Email</label>
      <input type="email" id="signupEmail" name="signupEmail" required [(ngModel)]="email"
        class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 text-white" />
    </div>

    <div>
      <label for="signupPassword" class="block text-sm font-medium mb-1 text-gray-300">Password</label>
      <input type="password" id="signupPassword" name="signupPassword" required [(ngModel)]="password"
        class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 text-white" />
    </div>

    <div>
      <label for="confirmPassword" class="block text-sm font-medium mb-1 text-gray-300">Confirm Password</label>
      <input type="password" id="confirmPassword" name="confirmPassword" required [(ngModel)]="confirmPassword"
        class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 text-white" />
    </div>

    <div class="flex gap-4">
      <button type="submit" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white py-2 rounded-lg font-semibold">
        Register
      </button>
      <button type="button" (click)="switchToLogin()"
        class="w-full bg-gray-600 hover:bg-gray-700 text-white py-2 rounded-lg font-semibold">
        Back to Login
      </button>
    </div>
  </form>
</div>
